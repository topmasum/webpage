<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact List(c)</title>
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <style>
      .contact-card {
        border: 2px solid #c70039;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
        height: 150px; /* Set the height to 180px */
        width: 300px;
        margin: 10px;
        display: inline-block;
      }
      .contact-card:hover {
        box-shadow: 0 8px 12px rgba(0, 0, 0, 0.3);
      }
      .call-button {
        position: absolute;
        bottom: 10px;
        right: 10px;
      }
      .phone-icon {
        color: solid #c70039;
      }

      .card-body {
        padding: 10px;
      }

      #allContactsHeading {
        margin-right: 0;
        position: sticky;
        top: 5px;
        z-index: 100;
        width: 100%;
        background: linear-gradient(to bottom, #c70039, #900c3f, #581845);
        height: 150px; /* Adjust the height for both mobile and PC screens */
        background-position: center;
        /* or contain, depending on your preference */
        text-align: left;
        color: white;
        transition: top 0.3s ease-in-out;
      }
      @media (max-width: 727px) {
        #allContactsHeading {
          /* Adjust the height for smaller screens */

          background-size: contain;
          background-repeat: no-repeat;
        }
      }

      #searchbar {
        position: absolute;
        top: 70px;
        right: 10px;
        width: 5%; /* Set the width to 50% of the container */
        border-radius: 20px;
        transition: width 0.3s ease-in-out; /* Add transition for smooth effect */
        overflow: hidden; /* Hide overflow content */
      }
      #searchIcon {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%); /* Center the icon vertically */
        border-radius: 20px;
        cursor: pointer;
      }
      #searchbar:hover {
        width: 40%; /* Expand the search bar on hover */
      }

      #searchIcon:hover + #searchbar {
        width: 40%; /* Expand the search bar when the icon is hovered */
      }
      #searchbar input.form-control {
        border-radius: 20px;
        /* Override the border-radius for the form-control class */
      }
      #filterAll,
      #filterFamily,
      #filterFriend,
      #filterRelatives {
        background: linear-gradient(to bottom, #c70039, #900c3f, #581845);
        border: 1px solid #c70039;
        transition: transform 0.3s ease-in-out;
      }

      #filterAll:hover,
      #filterFamily:hover,
      #filterFriend:hover,
      #filterRelatives:hover {
        background: linear-gradient(to bottom, #900c3f, #581845, #c70039);
        transform: scale(1.1);
      }

      .btn-primary {
        background: linear-gradient(to bottom, #c70039, #900c3f, #581845);
        border: 1px solid #c70039;
      }
      .btn-primary:hover {
        background: linear-gradient(to bottom, #900c3f, #581845, #c70039);
      }
      .btn:focus {
        box-shadow: 0 0 0 0.2rem rgba(137, 23, 75, 0.5);
      }
      h2 {
        color: #581845;
        font-weight: bold;
        /* make it full width */
        width: 100%;
      }
      .row {
        /* add marging below */
        margin-bottom: 50px;
        /* give some padding */
        padding-left: 80px;
      }
      .header-icon {
        margin-top: 10px;
        margin-bottom: 10px;
        margin-right: 10px;
        margin-left: 30px;
        padding: 10px;

        border-radius: 20%;
        max-height: 120px;
        max-width: 120px;
        /* add telephone shake animation */

        animation: slideIn 1s ease-out forwards;
      }
      @keyframes slideIn {
        0% {
          transform: translateX(-120px);
          opacity: 0;
        }
        100% {
          transform: translateX(0);
          opacity: 1;
        }
      }
      /* Add this CSS code for animation */
      @keyframes fadeIn {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }
      .contact-card {
        animation: fadeIn 1s ease-out; /* Adjust the animation duration and timing function as needed */
      }
    </style>
  </head>
  <body>
    <div id="allContactsHeading" style="top: 0px">
      <img src="Contactlist3.png" class="header-icon" />
      <div id="searchbar" class="input-group mb-3">
        <input
          type="text"
          class="form-control rounded-pill border-0 py-2 px-3"
          placeholder="Search for a contact by name or phone number"
          id="searchInput"
        />
        <div class="input-group-append">
          <span class="input-group-text" id="searchIcon">
            <i class="fa fa-search"></i>
          </span>
        </div>
      </div>
    </div>
    <br />
    <div class="container">
      <div class="row row-cols-3">
        <div class="col text-right">
          <div class="btn-group"></div>
        </div>
      </div>

      <div id="contactCardsContainer">
        <!-- Cards will be dynamically generated here -->
      </div>

      <div id="noMatchesMessage" style="display: none; color: red">
        <h2 align="center">No matches found</h2>
      </div>
    </div>

    <script>
      // Function to search and filter contacts by name or number
      // Function to search and filter contacts by name or number
      const contacts = [
        { name: "Masum", phone: "0142424242", relationship: "Friend" },
        { name: "Masum 1", phone: "01641058008", relationship: "Friend" },
        { name: "Asfi", phone: "0164434576", relationship: "Relatives" },
        { name: "Ammu", phone: "01753872101", relationship: "Family" },
        { name: "Abbu", phone: "01710876355", relationship: "Family" },
        { name: "Minhaj", phone: "01576487021", relationship: "Family" },
        { name: "Oishy", phone: "01710876355", relationship: "Friend" },
        { name: "Imran", phone: "0172256431", relationship: "Friend" },
        { name: "Rafi", phone: "01996534211", relationship: "Friend" },
        { name: "Asad", phone: "01710875435", relationship: "Relatives" },
        { name: "Samiul", phone: "01999876355", relationship: "Relatives" },
        { name: "Easin", phone: "01710811111", relationship: "Family" },
        { name: "Sogir mama", phone: "0175656565", relationship: "Relatives" },
        { name: "Disha", phone: "0123456789", relationship: "Friend" },
        { name: "Dishani", phone: "0188456789", relationship: "Cousin" },
        { name: "Shohan", phone: "0188777777", relationship: "Flat" },
        // { name: "Special", phone: "0188777777", relationship: "All" },
        // Add more contacts as needed
      ];
      const uniqueCategories = [
        ...new Set(contacts.map((contact) => contact.relationship)),
      ];

      // get contactCardsContainer
     
        const contactCardsContainer = document.getElementById( "contactCardsContainer"
      );
      // Function to dynamically generate contact cards
      uniqueCategories.forEach((category) => {
    console.log("Generating cards for " + category);
    const sectionId = `${category.toLowerCase()}Contacts`;
    generateContactCards(sectionId, category);
  });

  function generateContactCards(containerId, category) {
    const container = document.createElement("div");
    container.id = containerId;
    container.className = "row";
    contactCardsContainer.appendChild(container);

    contacts.forEach((contact) => {
      if (contact.relationship === category) {
        const card = document.createElement("div");
        card.className = "card contact-card mb-3";

        const cardBody = document.createElement("div");
        cardBody.className = "card-body";

        const title = document.createElement("h5");
        title.className = "card-title";
        title.textContent = contact.name;

        const phone = document.createElement("p");
        phone.className = "card-text";
        phone.textContent = `Phone: ${contact.phone}`;

        const relationship = document.createElement("p");
        relationship.className = "card-text";
        relationship.textContent = `Relationship: ${contact.relationship}`;

        const callButton = document.createElement("button");
        callButton.className = "call-button btn btn-primary";
        callButton.innerHTML = '<i class="fa fa-address-book"></i>';

        cardBody.appendChild(title);
        cardBody.appendChild(phone);
        cardBody.appendChild(relationship);
        card.appendChild(cardBody);
        card.appendChild(callButton);

        container.appendChild(card);
      }
    });
    const heading = document.createElement("h2");
    heading.textContent = category === "All" ? "All Contacts" : category;
    container.insertBefore(heading, container.firstChild);
  }

  function updateContactCards(category) {
    generateContactCards(`${category.toLowerCase()}Contacts`, category);
  }
  const filterButtonsContainer = document.querySelector(".btn-group");
  // add ALL button
  const filterAllButton = document.createElement("button");
  filterAllButton.id = "filterAll";
  filterAllButton.className = "btn btn-primary";
  filterAllButton.textContent = "All";
  filterAllButton.addEventListener("click", () => {
    // clear contactCardsContainer
    contactCardsContainer.innerHTML = "";
    console.log("clicked " + "All");
    // add all cards with category name
    uniqueCategories.forEach((category) => {
      updateContactCards(category);
    });
  });
  filterButtonsContainer.appendChild(filterAllButton);

  uniqueCategories.forEach((category) => {
    const filterButton = document.createElement("button");
    filterButton.id = `filter${category}`;
    filterButton.className = "btn btn-primary";
    filterButton.textContent = category;
    filterButton.addEventListener("click", () => {
      // clear contactCardsContainer
      contactCardsContainer.innerHTML = "";
      updateContactCards(category);
      console.log("clicked " + category);
    });
    filterButtonsContainer.appendChild(filterButton);
  });
 // Function to dynamically generate contact cards
function generateContactCards2(containerId, category, matchingContacts) {
  const container = document.createElement("div");
  container.id = containerId;
  container.className = "row";
  contactCardsContainer.appendChild(container);

  matchingContacts.forEach((contact) => {
    const card = document.createElement("div");
    card.className = "card contact-card mb-3";

    const cardBody = document.createElement("div");
    cardBody.className = "card-body";

    const title = document.createElement("h5");
    title.className = "card-title";
    title.textContent = contact.name;

    const phone = document.createElement("p");
    phone.className = "card-text";
    phone.textContent = `Phone: ${contact.phone}`;

    const relationship = document.createElement("p");
    relationship.className = "card-text";
    relationship.textContent = `Relationship: ${contact.relationship}`;

    const callButton = document.createElement("button");
    callButton.className = "call-button btn btn-primary";
    callButton.innerHTML = '<i class="fa fa-address-book"></i>';

    cardBody.appendChild(title);
    cardBody.appendChild(phone);
    cardBody.appendChild(relationship);
    card.appendChild(cardBody);
    card.appendChild(callButton);

    container.appendChild(card);
  });

  const heading = document.createElement("h2");
  heading.textContent = category === "All" ? "All Contacts" : category;
  container.insertBefore(heading, container.firstChild);
}

document.getElementById("searchInput").addEventListener("input", function () {
  const searchTerm = this.value.toLowerCase();

  // Clear previous search results
  contactCardsContainer.innerHTML = "";

  // Filter contacts based on search term
  const filteredContacts = contacts.filter(
    (contact) =>
      contact.name.toLowerCase().includes(searchTerm) ||
      contact.phone.includes(searchTerm)
  );

  // Display matching cards and categories
  if (searchTerm !== "") {
    uniqueCategories.forEach((category) => {
      const matchingContacts = filteredContacts.filter(
        (contact) => contact.relationship === category
      );

      if (matchingContacts.length > 0) {
        generateContactCards2(
          `${category.toLowerCase()}Contacts`,
          category,
          matchingContacts
        );
      }
    });
  } else {
    // If search bar is empty, display all contacts and categories
    uniqueCategories.forEach((category) => {
      generateContactCards2(
        `${category.toLowerCase()}Contacts`,
        category,
        contacts.filter((contact) => contact.relationship === category)
      );
    });
  }

  // Display "No matches found" message if there are no matching contacts
  const noMatchesMessage = document.getElementById("noMatchesMessage");
  noMatchesMessage.style.display =
    filteredContacts.length === 0 && searchTerm !== "" ? "block" : "none";
});



    </script>
  </body>
</html>
